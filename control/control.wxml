<view class="flex-col page-box justify-between">
	<view class="flex-col group_1">
		<view class="flex-row justify-between items-center self-stretch">
			<view class="flex-row items-end" bind:tap="remark">
				<text class="text">{{parent.userMap.self||parent.device.name||"电动车"}}</text>
				<image class="ml-4 shrink-0 image_4" src="/images/c519761d37adad7a6641ec6e8adf1c61.png" />
			</view>
		</view>
		<text class="self-start font text_2">设备蓝牙MAC：{{parent.device.deviceId||"00:00:00:00:00:00"}}</text>
		<text class="self-start font text_2">手机蓝牙MAC：{{parent.myDeviceId||"00:00:00:00:00:00"}}</text>
	</view>
	<!-- <view class="flex-row justify-start items-center btn">
		<text class="font_2 text_6">用户身份：</text>
		<text class="font_2 text_6" style="color:{{parent.user.identity?'#f7d061':''}}">{{parent.user.identity?"车主":"非车主"}}</text>
	</view> -->
	<!-- <view class="flex-row justify-start items-center btn">
		<text class="font_2 text_6">用户状态：</text>
		<text class="font_2 text_6" style="color:{{parent.user.state?'red':'green'}}">{{parent.user.state?"禁用":"启用"}}</text>
	</view> -->
	<view class="flex-col" style="margin-bottom: 40rpx;">
		<view class="flex-row justify-evenly group_2 {{!parent.user.deviceId?' disabled':''}}">
			<view class="flex-row items-center justify-center" bind:tap="scanCode">
				<image class="shrink-0 image_6" src="/images/61a725837d2bb3ad30a14275613d7fe7.png" />
				<text class="font_2">蓝牙配对</text>
			</view>
			<view class="flex-row items-center justify-center" bind:tap="findBuletooth">
				<image class="shrink-0 image_6" src="/images/link.png" />
				<text class="font_2">{{parent.user.deviceId?"断开":"蓝牙"}}连接</text>
			</view>
			<view class="flex-row items-center justify-center btn" bind:tap="getState">
				<image class="shrink-0 image_6" src="/images/ef1ab995f407b7bbc2eb65fde9b5333d.png" />
				<text class="font_2">状态刷新</text>
			</view>
		</view>
		<view class="flex-row items-center group_3" style="margin-bottom: 30rpx;">
			<view class="flex-row items-center">
				<image src="/images/l.png" class="shrink-0" style="width: 64rpx;height: 64rpx;" />
				<text class="shrink-0" style="font-size: 30rpx;margin:0 20rpx">蓝牙</text>
				<view class="flex-col justify-evenly" style="flex: 1;">
					<view class=" flex-row items-center btn" style="margin-bottom: 20rpx;">
						<text style="color:{{parent.user.deviceId?'#00C907':'#ccc'}} ;">{{parent.user.deviceId?"已":"未"}}连接</text>
						<view class="ml-4 shrink-0 section_5" style="margin-left:80rpx; background: {{parent.user.deviceId?'#00FF0D':'#ccc'}};"></view>
					</view>
					<view class="flex-row justify-start items-center btn">
						<text>信号强度</text>
						<canvas type="2d" id="dbm3" style="flex-shrink: 0; width:54px; height:14px;margin-left: 10rpx;"></canvas>
					</view>
					<view style="text-align: center;margin-left:100rpx;color: #0033FF;">{{parent.device.dbm||0}}dBm</view>
				</view>
			</view>
			<view class="flex-col btn shrink-0 justify-evenly">
				<view class="flex-row justify-evenly items-center">
					<image src="/images/y.png" style="width: 64rpx;height: 64rpx;" />
					<text>电压</text>
				</view>
				<view class="flex-row items-center justify-center">
					{{parent.setting.voltage||0}}V
				</view>
			</view>
		</view>
		<view class="flex-col items-center justify-center" style="height: 494rpx;" wx:if="{{parent.readStateIng}}">
			<image class="loading" style="width: 100rpx;height: 100rpx;" src="/images/loading.png" />
		</view>
		<view class="flex-col {{parent.user.state!==0?'disabled':''}}" wx:else="">
			<view class="flex-row items-center justify-evenly" style="background: #fff;border-radius: 30rpx;height: 254rpx;">
				<view class="flex-col items-center btn" bind:tap="control" data-control="{{[0,parent.setting.fortify?2:1,0,0]}}">
					<view class="image-icon" style="background:{{parent.setting.fortify?'#0D7AFF':'#fff'}};border-color: {{parent.setting.fortify?'#0D7AFF':'#000'}};">
						<image class="image_8" src="/images/clock-active.png" wx:if="{{parent.setting.fortify}}" />
						<image class="image_8" src="/images/clock.png" wx:else />
					</view>
					<text class="text_8 mt-9">设防</text>
				</view>
				<view class="flex-col items-center btn" bind:tap="control" data-control="{{[0,0,0,1]}}">
					<view class="image-icon" style="background:{{closeTouch==='find'?'#0D7AFF':'#fff'}};border-color: {{closeTouch==='find'?'#0D7AFF':'#000'}};">
						<image class="image_8" src="/images/find-active.png" wx:if="{{closeTouch==='find'}}" />
						<image class="image_8" src="/images/find.png" wx:else="" />
					</view>
					<text class="mt-10 text_8">寻车</text>
				</view>
				<view class="flex-col items-center btn" bind:tap="control" data-control="{{[0,0,parent.setting.site?2:1,0]}}">
					<view class="image-icon" style="background:{{parent.setting.site?'#0D7AFF':'#fff'}};border-color: {{parent.setting.site?'#0D7AFF':'#000'}};">
						<image class="image_8" src="/images/site-active.png" wx:if="{{parent.setting.site}}" />
						<image class="image_8" src="/images/site.png" wx:else />
					</view>
					<text class="mt-10 text_8">座桶</text>
				</view>
			</view>
			<view class="flex-col justify-center items-center" style="background: #fff;border-radius: 30rpx;margin-top: 30rpx;height: 210rpx;">
				<view wx:if="{{isopening}}">
					<view class="flex-row justify-center items-center image-wrapper_2 btn" style="background:{{closeTouch==='close'?'#324155':'#000'}}">
						<image class="image_9 loading" src="/images/loading.png" />
					</view>
					<text class="mt-10 text_9" style="opacity: 0;">操作中</text>
				</view>
				<view class="flex-col items-center" wx:elif="{{parent.setting.open}}" bind:touchstart="closeTouchStart" bind:touchend="closeTouchEnd" bind:longpress="closeDevice">
					<view class="flex-row justify-center items-center image-wrapper_2 btn" style="background:{{closeTouch==='close'?'#324155':'#000'}}">
						<image class="image_9" src="/images/2.png" />
					</view>
					<text class="mt-10 text_9">长按关机</text>
				</view>
				<view class="touch-control btn" wx:else bind:touchstart="touchstart" bind:touchmove="touchmove" bind:touchend="touchend">
					<view class="touch-control-box flex-row justify-between items-center ">
						<view class="touch-control-icon" style="transform: translateX({{translateX}}px);">
							<image src="/images/2.png" />
						</view>
						<text style="opacity: {{translateX>0?.5:1}};">滑动启动</text>
						<image style="opacity: {{translateX>0?.5:1}};margin-right: 40rpx;" src="/images/1.png" />
					</view>
				</view>
			</view>
		</view>
	</view>
</view>